---
import Layout from "../layouts/Layout.astro";
import Card from "../components/ui/Card.astro";
import CardHeader from "../components/ui/CardHeader.astro";
import CardContent from "../components/ui/CardContent.astro";
import Badge from "../components/ui/Badge.astro";
import Button from "../components/ui/Button.astro";
import Avatar from "../components/ui/Avatar.astro";
import Section from "../components/ui/Section.astro";
import Icon from "../components/ui/Icon.astro";
import ProjectCard from "../components/ProjectCard.astro";
import { RESUME_DATA } from "../config/resume";
---

<Layout>
  <main
    class="container relative mx-auto scroll-my-12 overflow-auto p-4 md:p-16 print:p-12"
  >
    <section class="mx-auto w-full max-w-2xl space-y-8 print:space-y-6">
      <!-- Header -->
      <div class="flex items-center justify-between">
        <div class="flex-1 space-y-1.5">
          <h1 class="text-pretty text-4xl font-bold">
            {RESUME_DATA.name}
          </h1>
          <p
            class="max-w-md text-pretty font-mono text-lg text-muted-foreground"
          >
            {RESUME_DATA.about}
          </p>
          <p
            class="max-w-md items-center text-pretty font-mono text-sm text-muted-foreground"
          >
            <a
              class="inline-flex gap-x-1.5 align-baseline leading-none hover:underline"
              href={RESUME_DATA.locationLink}
              target="_blank"
              rel="noopener noreferrer"
            >
              <Icon name="globe" class="size-3" />
              {RESUME_DATA.location}
            </a>
          </p>
          <div
            class="flex gap-x-1 pt-1 font-mono text-sm text-muted-foreground print:hidden"
          >
            {
              RESUME_DATA.contact.social.map((social) => (
                <Button
                  variant="outline"
                  size="icon"
                  href={social.url}
                  class="size-8"
                >
                  <Icon
                    name={social.icon as "github" | "linkedin"}
                    class="size-4"
                  />
                </Button>
              ))
            }
          </div>
        </div>

        <Avatar
          src={RESUME_DATA.avatarUrl}
          alt={RESUME_DATA.name}
          fallback={RESUME_DATA.initials}
          class="ml-1 size-28"
        />
      </div>

      <!-- About -->
      <Section>
        <h2 class="text-xl font-bold">About</h2>
        <p class="text-pretty font-mono text-sm text-muted-foreground">
          {RESUME_DATA.summary}
        </p>
      </Section>

      <!-- Education -->
      <Section>
        <h2 class="text-xl font-bold">Education</h2>
        {
          RESUME_DATA.education.map((education) => (
            <Card>
              <CardHeader>
                <div class="flex items-center justify-between gap-x-2 text-base">
                  <h3 class="font-semibold leading-none">{education.school}</h3>
                  <div class="text-sm tabular-nums text-muted-foreground">
                    {education.year}
                  </div>
                </div>
              </CardHeader>
              <CardContent class="mt-2">
                <div class="flex items-center justify-between gap-x-2">
                  <h3 class="leading-none">{education.degree}</h3>
                  <div class="text-sm tabular-nums text-muted-foreground">
                    {education.extra}
                  </div>
                </div>
              </CardContent>
            </Card>
          ))
        }
      </Section>

      <!-- Work Experience -->
      <Section>
        <h2 class="text-xl font-bold">Work Experience</h2>
        {
          RESUME_DATA.work.map((work) => (
            <Card>
              <CardHeader>
                <div class="flex items-center justify-between gap-x-2 text-base">
                  <h3 class="inline-flex items-center justify-center gap-x-1 font-semibold leading-none">
                    <a
                      class="hover:underline"
                      href={work.link}
                      target="_blank"
                      rel="noopener noreferrer"
                    >
                      {work.company}
                    </a>
                    <span class="inline-flex gap-x-1">
                      {work.badges.map((badge) => (
                        <Badge variant="secondary" class="align-middle text-xs">
                          {badge}
                        </Badge>
                      ))}
                    </span>
                  </h3>
                  <div class="text-sm tabular-nums text-muted-foreground">
                    {work.start} - {work.end}
                  </div>
                </div>
                <h4 class="font-mono text-sm leading-none">{work.title}</h4>
              </CardHeader>
              <CardContent class="text-xs">
                <ul class="list-outside list-disc space-y-2 text-pretty px-2 font-mono text-muted-foreground">
                  {work.bullets.map((bullet) => (
                    <li>{bullet}</li>
                  ))}
                </ul>
              </CardContent>
            </Card>
          ))
        }
      </Section>

      <!-- Skills -->
      <Section>
        <h2 class="text-xl font-bold">Skills</h2>
        <div class="flex flex-wrap gap-1">
          {RESUME_DATA.skills.map((skill) => <Badge>{skill}</Badge>)}
        </div>
      </Section>

      <!-- Projects -->
      <Section class="print-force-new-page scroll-mb-16">
        <h2 class="text-xl font-bold">Projects</h2>
        <div
          class="-mx-3 grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3 print:grid-cols-3 print:gap-2"
        >
          {
            RESUME_DATA.projects.map((project) => (
              <ProjectCard
                title={project.title}
                description={project.description}
                tags={project.techStack}
                link={project.link?.href}
              />
            ))
          }
        </div>
      </Section>
    </section>
  </main>
</Layout>

<style>
  @media print {
    .print-force-new-page {
      break-before: page;
    }
  }
</style>
